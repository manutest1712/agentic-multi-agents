flowchart TD

User["User Request"]

Orchestrator["OrchestratorAgent
(Planner, Router & Workflow Manager)"]

Inventory["InventoryAgent
(Stock Lookup, Inventory Match & Supplier ETA)"]

Sales["SalesAgent
(Order Execution & Transaction Recording)"]

Finance["FinanceAgent
(Cash Balance Tracking & Reports)"]

Quote["QuoteAgent
(Quote Estimation & Quote History Only)"]

User --> Orchestrator

Orchestrator -->|Stock Request| Inventory
Orchestrator -->|Quote Request| Quote
Orchestrator -->|Confirmed Purchase| Sales
Orchestrator -->|Finance Query| Finance

Inventory -->|Fetch Stock Count| StockTool["get_stock_level_tool()
(Purpose: Retrieve item stock count
Helper: get_stock_level())"]

Inventory -->|Resolve Item Names| SnapshotTool["get_inventory_snapshot_tool()
(Purpose: Find closest matching product
Helper: get_all_inventory())"]

Inventory -->|Low Stock ETA| SupplierTool["supplier_delivery_date_tool()
(Purpose: Estimate restock date
Helper: supplier_delivery_date())"]

Sales -->|Verify Stock| StockTool
Sales -->|Resolve Items| SnapshotTool
Sales -->|Create Transaction| TransactionTool["create_transaction_tool()
(Purpose: Record sales & reduce inventory
Helper: create_transaction())"]

TransactionTool -->|Transaction Amount + Status| Sales
Sales -->|Transaction Amount| Finance

Quote -->|Retrieve Quote History| QuoteTool["search_quote_history_tool()
(Purpose: Fetch prior quotes
Helper: search_quote_history())"]

Finance -->|Fetch Cash Balance| CashTool["get_cash_balance_tool()
(Purpose: Return current cash balance
Helper: get_cash_balance())"]

Finance -->|Generate Financial Report| ReportTool["generate_financial_report_tool()
(Purpose: Summarize financial state
Helper: generate_financial_report())"]

Finance -->|Cash Delta Update| Orchestrator

Inventory --> Orchestrator
Quote --> Orchestrator
Sales --> Orchestrator
Finance --> Orchestrator

Orchestrator --> User
